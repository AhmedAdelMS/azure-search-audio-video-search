<?xml version="1.0" encoding="utf-8"?>
<tt xml:lang="en-us" xmlns="http://www.w3.org/ns/ttml" xmlns:tts="http://www.w3.org/ns/ttml#styling" xmlns:ttm="http://www.w3.org/ns/ttml#metadata">
  <head>
    <metadata>
      <ttm:title>Media.wvx.aib</ttm:title>
      <ttm:copyright>Copyright (c) 2013 Microsoft Corporation.  All rights reserved.</ttm:copyright>
    </metadata>
    <styling>
      <style xml:id="Style1" tts:fontFamily="proportionalSansSerif" tts:fontSize="0.8c" tts:textAlign="center" tts:color="white" />
    </styling>
    <layout>
      <region style="Style1" xml:id="CaptionArea" tts:origin="0c 12.6c" tts:extent="32c 2.4c" tts:backgroundColor="rgba(0,0,0,160)" tts:displayAlign="center" tts:padding="0.3c 0.5c" />
    </layout>
    <recognizability>0.906</recognizability>
  </head>
  <body region="CaptionArea">
    <div>
      <p begin="00:00:03.380" end="00:00:03.880">Hello.</p>
      <p begin="00:00:05.260" end="00:00:08.290">Hello,...my gosh.</p>
      <p begin="00:00:08.290" end="00:00:12.630">This is my this is my back-to-back talk I just did the what's new...csharp</p>
      <p begin="00:00:12.630" end="00:00:17.340">...vb talk so I'm still on the adrenaline rush from that talk because</p>
      <p begin="00:00:17.340" end="00:00:23.080">...just it's exciting everybody's, you know,...excited to be there and I was excited be there so,</p>
      <p begin="00:00:23.080" end="00:00:29.350">about fifteen till the end of this talk is going slowly crash that</p>
      <p begin="00:00:29.350" end="00:00:33.380">...that I talk to anybody okay so you are all the ones we're going out whereas where</p>
      <p begin="00:00:33.380" end="00:00:38.750">people asking questions okay you guys were all coming up here to make sure you got seats so,</p>
      <p begin="00:00:38.750" end="00:00:42.930">in that talk we talked briefly very briefly about</p>
      <p begin="00:00:42.930" end="00:00:46.890">...analyzers built on the...compiler platform</p>
      <p begin="00:00:46.890" end="00:00:50.840">...is a piece of this giant thing called project</p>
      <p begin="00:00:50.840" end="00:00:55.540">roslyn the thing I put...quotes because often we still think of roslyn and,</p>
      <p begin="00:00:55.540" end="00:01:00.100">we people still talk about the thing called rather is much bigger than api said</p>
      <p begin="00:01:00.100" end="00:01:04.860">involves the compilers of involves the id...scripting and</p>
      <p begin="00:01:04.860" end="00:01:10.640">...much bigger thing is also the name of open-source project on get hub right so,</p>
      <p begin="00:01:10.640" end="00:01:14.290">arousal is still alive and...we're talking about very specifically here is a single</p>
      <p begin="00:01:14.290" end="00:01:19.280">...compiler platform which is the api set that we built on top the csharp in</p>
      <p begin="00:01:19.280" end="00:01:22.630">visual basic compilers to allow you to</p>
      <p begin="00:01:22.630" end="00:01:26.640">introspection source code transformation of source code really...so you</p>
      <p begin="00:01:26.640" end="00:01:32.510">could write smart things that deal with source code with csharp code so my name is</p>
      <p begin="00:01:32.510" end="00:01:35.350">justin...I've been on that project for.</p>
      <p begin="00:01:35.350" end="00:01:43.530">Too long no, not really it's so much fun but, it's...it's been since we kind of</p>
      <p begin="00:01:43.530" end="00:01:48.610">kick the thing off about six years ago we finished up visual studio twenty ten and,</p>
      <p begin="00:01:48.610" end="00:01:53.190">I move very quickly over to start working on this re imagining and</p>
      <p begin="00:01:53.190" end="00:01:57.740">then during that time we should visual studio a couple more times and we weren't in it but,</p>
      <p begin="00:01:57.740" end="00:02:02.420">here with visual stooges twenty fifteen we are in it right is there is a real</p>
      <p begin="00:02:02.420" end="00:02:05.060">saying is alive and,</p>
      <p begin="00:02:05.060" end="00:02:10.060">the notion of analyzers encoder where libraries we're going to talk about today and,</p>
      <p begin="00:02:10.060" end="00:02:12.010">I'm we're going to build today are</p>
      <p begin="00:02:12.010" end="00:02:18.360">in the box so how many people here just let me get a show</p>
      <p begin="00:02:18.360" end="00:02:22.860">...I want so temperature the room because I don't really have a planned?</p>
      <p begin="00:02:24.260" end="00:02:26.000">And, I want...a sense of what people are interested in</p>
      <p begin="00:02:26.000" end="00:02:33.210">...talk with some folks over here they had some ideas how many people have tried to build a dot analyzer?</p>
      <p begin="00:02:33.210" end="00:02:39.200">Okay, so, like a small handful of your close yes I know you building analyzer.</p>
      <p begin="00:02:39.200" end="00:02:44.190">So, but, how many people here are just interested in like I want to...to build these things I know what it is I want to</p>
      <p begin="00:02:44.190" end="00:02:48.890">get involved...start working on that...okay,</p>
      <p begin="00:02:48.890" end="00:02:54.010">so,...I want to try and present this as something for you guys okay so if you build</p>
      <p begin="00:02:54.010" end="00:02:58.250">...analyzer will try...triangle really, really deep but what I want to be as I want to be at</p>
      <p begin="00:02:58.250" end="00:03:01.890">the talk where we spend most of our time encode away from slides</p>
      <p begin="00:03:01.890" end="00:03:06.470">...show you big syntax tree diagrams are all the other theory that</p>
      <p begin="00:03:06.470" end="00:03:09.890">...going to sit down and write code ever going to build some</p>
      <p begin="00:03:09.890" end="00:03:16.120">...so I...this last time in the last session they put these slides of the front</p>
      <p begin="00:03:16.120" end="00:03:20.330">for evaluations if you're in a bad mood right now you can wait till the end</p>
      <p begin="00:03:20.330" end="00:03:25.350">...fine with that you're feeling pretty good go ahead three of you could snippet right here but,</p>
      <p begin="00:03:25.350" end="00:03:31.840">seriously don't give...better view right now...just...</p>
      <p begin="00:03:31.840" end="00:03:36.640">So, what is a code where library this is a name that we are attaching</p>
      <p begin="00:03:36.640" end="00:03:39.170">...very important feature</p>
      <p begin="00:03:39.170" end="00:03:45.920">of it's notit's a it's a feature that gets exposed in visual studio twenty fifteen but,</p>
      <p begin="00:03:45.920" end="00:03:50.250">we expect this to be something that we build upon for years to come the</p>
      <p begin="00:03:50.250" end="00:03:54.880">...code where library is library the provides guidance on correct use</p>
      <p begin="00:03:54.880" end="00:03:58.850">through imbedded tooling and operates in the users coding...</p>
      <p begin="00:04:00.300" end="00:04:02.520">So, imagine take a library and</p>
      <p begin="00:04:02.520" end="00:04:06.820">that comes along with all of the extra bits and pieces it needs to have</p>
      <p begin="00:04:06.820" end="00:04:12.310">an editing experience that helps you use the library use the api is in this</p>
      <p begin="00:04:12.310" end="00:04:17.460">iteration of that for twenty fifteen that means analyzers which</p>
      <p begin="00:04:17.460" end="00:04:22.220">produce things like squiggles in the editor on the error list in...may break your</p>
      <p begin="00:04:22.220" end="00:04:27.580">build that sort of thing on the build server fx cop just sort of thing includes fixes for those</p>
      <p begin="00:04:27.580" end="00:04:31.170">...can create fixes that go along with them in the future this might</p>
      <p begin="00:04:31.170" end="00:04:36.270">mean custom intelligence if you have a strongly typed api that take strings, for example,</p>
      <p begin="00:04:36.270" end="00:04:38.640">or has some notion of,</p>
      <p begin="00:04:38.640" end="00:04:43.280">you know, convention for type names...like in nbc where you have...and that sort of thing you want to</p>
      <p begin="00:04:43.280" end="00:04:48.260">make a custom intelligence you can imagine all sorts of things here custom formatting rules for</p>
      <p begin="00:04:48.260" end="00:04:52.590">how you format calls to my api is...that's not in the cards right now</p>
      <p begin="00:04:52.590" end="00:04:57.050">but that's in thinking for later we want to take this idea of code where libraries that</p>
      <p begin="00:04:57.050" end="00:05:00.940">...tooling in the library itself or in the in</p>
      <p begin="00:05:00.940" end="00:05:04.190">...delivery mechanism is packaging and,</p>
      <p begin="00:05:04.190" end="00:05:09.810">take that a lot further so that's kind of the vision?</p>
      <p begin="00:05:09.810" end="00:05:14.060">So, let's talk specifically about done...again, they're...on a</p>
      <p begin="00:05:14.060" end="00:05:19.930">...compiler platform api as we built this system we wanted to make sure that we could</p>
      <p begin="00:05:19.930" end="00:05:23.100">do this also in an efficient way so,</p>
      <p begin="00:05:23.100" end="00:05:27.830">the analyzer api eyes are design to run during compilation as</p>
      <p begin="00:05:27.830" end="00:05:33.330">compilation happens whether that's a command line or to the id...compilation is happening all</p>
      <p begin="00:05:33.330" end="00:05:38.040">the time incrementally essentially as you're typing the aidid to make sure you get</p>
      <p begin="00:05:38.040" end="00:05:42.600">to intelligence after pressing a dot or squiggles show up in a timely fashion</p>
      <p begin="00:05:42.600" end="00:05:47.280">so while that happens as the compiler does actual phases of</p>
      <p begin="00:05:47.280" end="00:05:52.070">compilation and binds identifiers and does all of that work is calls out to</p>
      <p begin="00:05:52.070" end="00:05:56.930">dot analyzers so that it does we aren't doing work twice right so you don't have to write</p>
      <p begin="00:05:56.930" end="00:06:00.750">...and say okay tell me about this thing no instead the compiler comes and says</p>
      <p begin="00:06:00.750" end="00:06:07.790">all right I've cooked all this up now what you want to know right so we can do it efficiently?</p>
      <p begin="00:06:07.790" end="00:06:12.310">The today they can be distributed via new get or vsix...vsix visual studio</p>
      <p begin="00:06:12.310" end="00:06:18.030">extension there is a project template that you can install with visual</p>
      <p begin="00:06:18.030" end="00:06:24.930">studio that through the through the extension manager that allow you to create one of these create projects for doing these</p>
      <p begin="00:06:24.930" end="00:06:29.290">easily but, when you write a new get analyzer the cool thing about that because</p>
      <p begin="00:06:29.290" end="00:06:32.780">...the magic package restore it go it flows with</p>
      <p begin="00:06:32.780" end="00:06:38.420">your code resource control into the build server wherever that needs to be so if you track if you</p>
      <p begin="00:06:38.420" end="00:06:43.680">tracker dependencies if you express your dependencies in your project with new get with</p>
      <p begin="00:06:43.680" end="00:06:46.760">...get packages you can get analyzers to just kind of flow through</p>
      <p begin="00:06:46.760" end="00:06:52.390">the entire system that way so that's why it's very attractive vsix is kind of...things</p>
      <p begin="00:06:52.390" end="00:06:59.380">that maybe you don't want to go through the whole system things like I've I wrote...</p>
      <p begin="00:06:59.380" end="00:07:04.500">project called the csharp essentials which is just helping you guide</p>
      <p begin="00:07:04.500" end="00:07:09.680">you to using csharp six features are not necessarily the sorts of things you'd want to error on the build server</p>
      <p begin="00:07:09.680" end="00:07:15.010">rather things like aided you could use an expression bodied member here, you know, that sort of thing so,</p>
      <p begin="00:07:15.010" end="00:07:16.220">that one works really particular</p>
      <p begin="00:07:16.220" end="00:07:21.680">...of vsix also something you wouldn't want to add every project you don't have on all the time so,</p>
      <p begin="00:07:21.680" end="00:07:25.800">there's a couple different...mechanisms and they have different reasons for using them now dot</p>
      <p begin="00:07:25.800" end="00:07:33.190">analyzers are used enforce best practices so, a lot of ways you can think of it as kind of the</p>
      <p begin="00:07:33.190" end="00:07:36.760">Spiritual successor to fx cop in fact the team</p>
      <p begin="00:07:36.760" end="00:07:42.270">is responsible for this we built several of the kind of the highest valued went did a bunch of</p>
      <p begin="00:07:42.270" end="00:07:44.650">...picked out...the highest value fx</p>
      <p begin="00:07:44.650" end="00:07:49.110">...rules that really get used a lot and add the most value into the projects and</p>
      <p begin="00:07:49.110" end="00:07:55.770">converted those dot net analyzers so those and those are up...get as well so you can grab those and use them today and,</p>
      <p begin="00:07:55.770" end="00:07:59.870">as I said before dot enablers analyzers may include code fixes those</p>
      <p begin="00:07:59.870" end="00:08:05.460">what happened on the build server but they are they happen in the id...show up in a little light bulbs</p>
      <p begin="00:08:05.460" end="00:08:11.840">everyone grid experience around okay.</p>
      <p begin="00:08:11.840" end="00:08:16.800">As I...forecast vision library plus analyzer and fix that is a code where library</p>
      <p begin="00:08:16.800" end="00:08:19.860">ok.</p>
      <p begin="00:08:19.860" end="00:08:28.950">And, that is all the slides I've got four you.</p>
      <p begin="00:08:28.950" end="00:08:32.080">And, you guys are easy.</p>
      <p begin="00:08:32.080" end="00:08:37.550">Ok, so, if you are the last session I apologize I'm going to show this again I</p>
      <p begin="00:08:37.550" end="00:08:42.700">need...showed again just kind...this up for everybody who has been here because we have such a large room</p>
      <p begin="00:08:42.700" end="00:08:44.970">I wasn't expecting to have such a large room I'm really,</p>
      <p begin="00:08:44.970" end="00:08:48.690">really delighted that there's this much interest but,</p>
      <p begin="00:08:48.690" end="00:08:56.230">that means that I wanted to be a little bit more interactive and talk about what we want to build...maybe build on-the-fly.</p>
      <p begin="00:08:56.230" end="00:09:01.170">...have to pick something to build and we're going to build is a set</p>
      <p begin="00:09:01.170" end="00:09:06.350">of guidance for immutable arrays now before we build that I want to show a</p>
      <p begin="00:09:06.350" end="00:09:13.660">couple of things that I think are instructive let's dig into.</p>
      <p begin="00:09:13.660" end="00:09:15.540">So, it's most...first so we're...we're</p>
      <p begin="00:09:15.540" end="00:09:22.730">...build analyzer a little bit but I want to show you what it looks like when you got one of the product so, this is.</p>
      <p begin="00:09:22.730" end="00:09:25.920">This is a fun project people see my talks before they know that I like to</p>
      <p begin="00:09:25.920" end="00:09:28.180">...to show of z machines.</p>
      <p begin="00:09:29.250" end="00:09:30.500">They may nobody's nobody knows</p>
      <p begin="00:09:30.500" end="00:09:37.190">...talk about yes one person z machine wasin</p>
      <p begin="00:09:37.190" end="00:09:41.860">...a virtual machine perhaps the first commercially available commercial machine back in the early eighties</p>
      <p begin="00:09:41.860" end="00:09:44.320">for running text adventure games written by the company info</p>
      <p begin="00:09:44.320" end="00:09:48.230">calm in order so that the when you want to produce a game a text...game</p>
      <p begin="00:09:48.230" end="00:09:54.240">...talking about go north...south pick up the soared kill the troll that sort of thing so,</p>
      <p begin="00:09:54.240" end="00:09:59.070">when you when they wanted to create a game they would create a game file that was the</p>
      <p begin="00:09:59.070" end="00:10:03.680">snapshot of initial memory for the virtual machine and then they would just create a</p>
      <p begin="00:10:03.680" end="00:10:08.560">vm a different vm for every machine they targeted because back then if you want to have, you know,</p>
      <p begin="00:10:08.560" end="00:10:12.690">broad reach of the consumer base...you're writing for the apple to</p>
      <p begin="00:10:12.690" end="00:10:16.640">...for the tandy or writing for everything right</p>
      <p begin="00:10:16.640" end="00:10:19.560">...so you need to have a broad set</p>
      <p begin="00:10:19.560" end="00:10:23.870">of machines available to this help them with development this is...machine well,</p>
      <p begin="00:10:23.870" end="00:10:31.090">I've gotten several of these this one is it's pretty glorious I personally think because it's a full</p>
      <p begin="00:10:31.090" end="00:10:38.200">...that I wrote for this I'm a little crazy so if I...and run into this...see</p>
      <p begin="00:10:38.200" end="00:10:43.550">...right there's just the code base I'm totally this is self-serving right now but,</p>
      <p begin="00:10:43.550" end="00:10:46.300">I can open the mailbox hit a</p>
      <p begin="00:10:46.300" end="00:10:50.640">break point step around through the through the code all that kind-of thing but,</p>
      <p begin="00:10:50.640" end="00:10:55.630">...works in a run the whole games all these games so this is just my code base</p>
      <p begin="00:10:55.630" end="00:10:57.420">and I want to look at right now and look at some</p>
      <p begin="00:10:57.420" end="00:11:02.300">...analysis now I've gotten here what's delete something</p>
      <p begin="00:11:02.300" end="00:11:07.970">I've gotten here I have installed csharp essentials csharp essentials is an extension</p>
      <p begin="00:11:07.970" end="00:11:13.220">...for little...twenty fifteen to give you a set of analyzers just</p>
      <p begin="00:11:13.220" end="00:11:15.440">a very few like three analyzers</p>
      <p begin="00:11:15.440" end="00:11:20.800">...refactoring to allow you to basically point out and,</p>
      <p begin="00:11:20.800" end="00:11:25.040">transform code that could go to csharp six...six feature could be</p>
      <p begin="00:11:25.040" end="00:11:29.580">used if you want to fight it you can go to the extensions and updates from the tools menu search</p>
      <p begin="00:11:29.580" end="00:11:35.630">...essentials it's right here we're using the last session...using this in the</p>
      <p begin="00:11:35.630" end="00:11:41.380">last session to convert features so, in my error list?</p>
      <p begin="00:11:41.380" end="00:11:44.590">I actually should have tons of problems.</p>
      <p begin="00:11:45.790" end="00:11:50.070">...problems this is guidance given to me through this vsix that's</p>
      <p begin="00:11:50.070" end="00:11:54.460">...visual studio is not part of the compiler but there are</p>
      <p begin="00:11:54.460" end="00:11:54.960">literally.</p>
      <p begin="00:11:56.350" end="00:12:00.240">A hundred-and-some things that I could do in this project if I wanted to</p>
      <p begin="00:12:00.240" end="00:12:05.240">you csharp six features right now this is this</p>
      <p begin="00:12:05.240" end="00:12:09.600">error list is something we completely rebuilt for visuals two-twenty fifteen</p>
      <p begin="00:12:10.620" end="00:12:15.470">to make it scale to the several thousand errors and</p>
      <p begin="00:12:15.470" end="00:12:20.450">warnings cases to make it easier to work with when that happens so that the short-order makes sense you get</p>
      <p begin="00:12:20.450" end="00:12:25.330">...hopefully you get the real error up on top is causing all the rest of the errors when it comes to cascading</p>
      <p begin="00:12:25.330" end="00:12:30.160">situations done a lot of work here to make sure that it's very</p>
      <p begin="00:12:30.160" end="00:12:35.150">efficient at loading lots and lots of...because in this release with the release of analyzers we</p>
      <p begin="00:12:35.150" end="00:12:39.490">wanted to we're going to do a lot more of that now if I come down to the wireless thing I'm actually going to</p>
      <p begin="00:12:39.490" end="00:12:46.120">see some of these show up in the editor you'll see that certain things are great out kind of</p>
      <p begin="00:12:46.120" end="00:12:51.110">faded out because this is a case where...analyzer that's doing that the same fade this</p>
      <p begin="00:12:51.110" end="00:12:53.780">outright here because.</p>
      <p begin="00:12:53.780" end="00:12:57.380">This if I...says consider use an expression body member here</p>
      <p begin="00:12:57.380" end="00:13:01.240">...use the new csharp six feature that allows me...use the double</p>
      <p begin="00:13:01.240" end="00:13:06.110">...the pharaoh to produce...expression by member of</p>
      <p begin="00:13:06.110" end="00:13:10.920">...fix for it so when I look at the fix you see it right here.</p>
      <p begin="00:13:10.920" end="00:13:15.540">And, you see this kind of...you what's very cool about this in very subtle is if you notice in that</p>
      <p begin="00:13:15.540" end="00:13:19.110">...view the red part those are great out there.</p>
      <p begin="00:13:19.110" end="00:13:24.190">Is actually what this is a using the roslyn object model because</p>
      <p begin="00:13:24.190" end="00:13:25.930">...snapshot way I</p>
      <p begin="00:13:25.930" end="00:13:29.990">create a code fixes I create a new version of that in the future at some point</p>
      <p begin="00:13:29.990" end="00:13:35.680">...future crease and speculative version...fork often do something else so,</p>
      <p begin="00:13:35.680" end="00:13:40.420">the features though can run on those that entire object model even if it's in the future so what</p>
      <p begin="00:13:40.420" end="00:13:44.830">you're seeing that graying out there that's actually the analyzer itself running in the preview window</p>
      <p begin="00:13:44.830" end="00:13:47.590">it's not like we just took a bitmap it's actually the real thing that's</p>
      <p begin="00:13:47.590" end="00:13:51.120">...editor hosted in there and it's running right there but,</p>
      <p begin="00:13:51.120" end="00:13:53.740">you can see what's going to do you get all of this for free when you write</p>
      <p begin="00:13:53.740" end="00:13:58.810">a code fix and apply it and it goes way down below I can also</p>
      <p begin="00:13:58.810" end="00:14:04.710">...code fixes so that they can fix at various scopes so I could say well fix everything</p>
      <p begin="00:14:04.710" end="00:14:08.710">...this document and look at a preview of that and?</p>
      <p begin="00:14:08.710" end="00:14:12.350">Watch my line count drop by about forty lines of code so</p>
      <p begin="00:14:12.350" end="00:14:17.530">that's the sort of thing that you can do with code fix this one is all again with vsix.</p>
      <p begin="00:14:17.530" end="00:14:18.350">There are several</p>
      <p begin="00:14:19.810" end="00:14:24.925">...well that's one way of distributing and packaging these but I</p>
      <p begin="00:14:24.925" end="00:14:30.120">think the preferable way and the way that most people want to distribute them is through new get</p>
      <p begin="00:14:30.120" end="00:14:34.090">...this is a great way of doing it because you can ensure that you can have your own</p>
      <p begin="00:14:34.090" end="00:14:38.770">new get packages that are used...you know, at your companies on your build</p>
      <p begin="00:14:38.770" end="00:14:43.330">servers to for your own guidance your own particular things that you want to make sure that</p>
      <p begin="00:14:43.330" end="00:14:49.270">your developer teams are adhering to the best practices that your in team enforces and,</p>
      <p begin="00:14:49.270" end="00:14:53.020">then also for things that are out there that are come common libraries that people</p>
      <p begin="00:14:53.020" end="00:14:57.520">use when they go get those from new get I want their tooling...what the squiggles and analyst analysis</p>
      <p begin="00:14:57.520" end="00:15:05.040">come down with so back to this...I don't I apologize again if you if you saw this</p>
      <p begin="00:15:05.040" end="00:15:08.940">...last are the idea here this code?</p>
      <p begin="00:15:08.940" end="00:15:14.330">It's pretty simple what it's doing most people can see what it's doing it's you know,</p>
      <p begin="00:15:14.330" end="00:15:18.880">open empty array you open array with five elements and you print the length of each one</p>
      <p begin="00:15:18.880" end="00:15:24.110">okay very simple and when we're...to csharp new dot net this is a</p>
      <p begin="00:15:24.110" end="00:15:29.440">...of thingthat we...this becomes very common we this is how we</p>
      <p begin="00:15:29.440" end="00:15:33.420">cr world right...nobody's very surprised about that?</p>
      <p begin="00:15:33.420" end="00:15:35.700">Now then what happens though is we introduce a new</p>
      <p begin="00:15:35.700" end="00:15:40.610">library and you got all these ideas your head about how things work right and,</p>
      <p begin="00:15:40.610" end="00:15:45.240">we introduce something that's conceptually very similar to something that you've been working with for years like</p>
      <p begin="00:15:45.240" end="00:15:48.560">arrays so the thing I'm going to refer to as</p>
      <p begin="00:15:48.560" end="00:15:53.060">...system dot collections dot immutable a package that we released with a set of</p>
      <p begin="00:15:53.060" end="00:15:58.490">immutable collections it's got, you know, dictionaries and, in lists and things are all done</p>
      <p begin="00:15:58.490" end="00:16:02.800">in a very immutable style so that when you add to them you get a new one back right and</p>
      <p begin="00:16:02.800" end="00:16:09.170">there's a lot of sharing of items between them because it's kind of snapshot in...very popular but,</p>
      <p begin="00:16:09.170" end="00:16:11.900">when using array you would think?</p>
      <p begin="00:16:11.900" end="00:16:14.930">That you write-in very much the same way so here's the code</p>
      <p begin="00:16:14.930" end="00:16:19.770">so aone down here is very similar to a one up here right you just</p>
      <p begin="00:16:19.770" end="00:16:23.020">...one up you assume it's going to be empty right.</p>
      <p begin="00:16:23.020" end="00:16:24.530">Down here, you know,</p>
      <p begin="00:16:24.530" end="00:16:28.610">one up and you put a collection analyzer looks very much like this you assume that's going</p>
      <p begin="00:16:28.610" end="00:16:40.780">to work but in reality if I have five this it will do nothing because I didn't run that code?</p>
      <p begin="00:16:40.780" end="00:16:42.430">Because load watch me fail</p>
      <p begin="00:16:42.430" end="00:16:46.090">all right so in this case though explodes</p>
      <p begin="00:16:46.090" end="00:16:51.030">like badly no reference exception and it's not at all-clear why in</p>
      <p begin="00:16:51.030" end="00:16:56.410">fact is very subtle why this explodes the reason is because immutable</p>
      <p begin="00:16:56.410" end="00:17:03.230">...itself the reason was it's purpose for living is that so that can wrap around</p>
      <p begin="00:17:03.230" end="00:17:05.030">...existing array an offer you kind of</p>
      <p begin="00:17:05.030" end="00:17:09.610">...interface into that array so read-only sort of way to talk to it...got</p>
      <p begin="00:17:09.610" end="00:17:14.380">ad methods so that when you add element to it you get back a new immutable array now</p>
      <p begin="00:17:14.380" end="00:17:21.239">...because we want to keep the overhead very low on this it's...so all</p>
      <p begin="00:17:21.239" end="00:17:25.869">...have public parameter list constructors that basically create</p>
      <p begin="00:17:25.869" end="00:17:29.949">destruct with everything old out right just as if you said default of that</p>
      <p begin="00:17:29.949" end="00:17:34.519">struct value it's the same thing if you knew it up with the public parameter...just kind of one of the</p>
      <p begin="00:17:34.519" end="00:17:39.239">...the cost...the design of using a struct so in this case there is no</p>
      <p begin="00:17:39.239" end="00:17:44.130">rate in it right now so explodes if I look at.</p>
      <p begin="00:17:44.130" end="00:17:45.640">...at this.</p>
      <p begin="00:17:45.640" end="00:17:50.550">Aone actually says it's initialized and then trying to drill into</p>
      <p begin="00:17:50.550" end="00:17:55.270">it explodes even in the debugged so this is something that.</p>
      <p begin="00:17:55.270" end="00:17:59.970">...api that should tell you don't use me this way this is a bad idea</p>
      <p begin="00:17:59.970" end="00:18:05.200">...is not what you want it's not what you're expecting it to do the sort of thing that we would normally</p>
      <p begin="00:18:05.200" end="00:18:09.880">...the compiler input and error writers who don't do this is not the does not what you want</p>
      <p begin="00:18:09.880" end="00:18:14.140">is never going to work right interestingly on the</p>
      <p begin="00:18:14.140" end="00:18:18.120">next line so if I were to say...</p>
      <p begin="00:18:18.120" end="00:18:24.040">...this out on...and carry-on...continue on the next line I will also get</p>
      <p begin="00:18:24.040" end="00:18:26.910">a no...because in this case it again is going to call</p>
      <p begin="00:18:26.910" end="00:18:29.600">...public...constructor but even if it didn't.</p>
      <p begin="00:18:29.600" end="00:18:32.300">It would still do the wrong thing even if this work even the public</p>
      <p begin="00:18:32.300" end="00:18:36.920">...constructor actually constructed from immutable...that was just a zero.</p>
      <p begin="00:18:36.920" end="00:18:41.880">Element array would still fail because the collection initialize are in csharp all</p>
      <p begin="00:18:41.880" end="00:18:45.140">...does is compile down to a sequence of ad</p>
      <p begin="00:18:45.140" end="00:18:49.870">...kelso...ad method and the ad method on amenable rate doesn't affect that immutable</p>
      <p begin="00:18:49.870" end="00:18:54.360">...it returns a new one so what you get the end of collection analyzer is still</p>
      <p begin="00:18:54.360" end="00:19:00.510">and empty array right so this very much also does not do what you think it's going</p>
      <p begin="00:19:00.510" end="00:19:05.240">Wouldn't it be great if this api came along with that guides</p>
      <p begin="00:19:05.240" end="00:19:10.830">with those errors so just yesterday?</p>
      <p begin="00:19:10.830" end="00:19:13.230">I through a new get package up here.</p>
      <p begin="00:19:13.230" end="00:19:17.440">You look at my all list we'll say</p>
      <p begin="00:19:17.440" end="00:19:21.270">well I couple keywords oops.</p>
      <p begin="00:19:21.270" end="00:19:21.750">That's not going</p>
      <p begin="00:19:21.750" end="00:19:28.050">...anything ago so I put a package called core effects analyzers cortex</p>
      <p begin="00:19:28.050" end="00:19:33.270">analyzers has to analyzers in it to detect exactly the cases I just showed you</p>
      <p begin="00:19:33.270" end="00:19:38.300">so,... things that cost you right because they happen at runtime</p>
      <p begin="00:19:38.300" end="00:19:43.180">they don't happen at compile-time in the editor when you're typing so they cost you time and money and</p>
      <p begin="00:19:43.180" end="00:19:48.010">their problems right and they cause you to go and debugging figure out go whoops,...</p>
      <p begin="00:19:48.010" end="00:19:49.310">and, then you're mad at me because</p>
      <p begin="00:19:49.310" end="00:19:55.920">...and tell you right so instead of getting mad at me.</p>
      <p begin="00:19:55.920" end="00:19:59.190">...install this new get package.</p>
      <p begin="00:19:59.190" end="00:20:04.020">And, immediately or...close to immediately after things kind of</p>
      <p begin="00:20:05.240" end="00:20:05.740">Squiggles.</p>
      <p begin="00:20:06.920" end="00:20:10.210">...they just start showing up here and the...list.</p>
      <p begin="00:20:10.210" end="00:20:12.290">There are.</p>
      <p begin="00:20:12.290" end="00:20:14.660">To squiggles they say.</p>
      <p begin="00:20:14.660" end="00:20:16.370">Useful things.</p>
      <p begin="00:20:16.370" end="00:20:20.720">Do not use amenable to...doesn't tell you why we can make it tell you why there's,</p>
      <p begin="00:20:20.720" end="00:20:23.810">there's there are facilities in the new get in the analyzers</p>
      <p begin="00:20:23.810" end="00:20:26.890">...let you add more descriptive texture but,</p>
      <p begin="00:20:26.890" end="00:20:33.180">do not use these do not use a collection...with immutable...in fact?</p>
      <p begin="00:20:33.180" end="00:20:36.600">Let's go ahead and...quick fixes to show you to...to the</p>
      <p begin="00:20:36.600" end="00:20:41.250">api you should have used so instead of knowing up immutable array.</p>
      <p begin="00:20:41.250" end="00:20:44.270">Instead go and use the dot empty property which gives you back</p>
      <p begin="00:20:44.270" end="00:20:48.760">...instance of immutable...that has no elements right.</p>
      <p begin="00:20:48.760" end="00:20:50.290">So, we can do that.</p>
      <p begin="00:20:50.290" end="00:20:54.280">And, then...here this one's a little bit more complicated to...the code fix</p>
      <p begin="00:20:54.280" end="00:20:59.160">for but instead of using collection analyzer instead called create</p>
      <p begin="00:20:59.160" end="00:21:06.360">range passing a new array that will be used as the array inside.</p>
      <p begin="00:21:06.360" end="00:21:09.920">We go and now if I run this.</p>
      <p begin="00:21:09.920" end="00:21:13.990">Things were fine and wouldn't...been a lot easier than seeing it happen</p>
      <p begin="00:21:13.990" end="00:21:17.760">at runtime and not hating me...a lot easier on me?</p>
      <p begin="00:21:19.080" end="00:21:24.090">If you guys got this to see the so what I want to do now...so this kind of setting</p>
      <p begin="00:21:24.090" end="00:21:28.870">up what the problem spaces and I want to show you guys how to build these.</p>
      <p begin="00:21:28.870" end="00:21:35.120">You want...okay, so.</p>
      <p begin="00:21:35.120" end="00:21:39.450">We're going-to we're going-to go and create a new project.</p>
      <p begin="00:21:39.450" end="00:21:43.230">I have gone installed this actually only show you again it's in this extensions</p>
      <p begin="00:21:43.230" end="00:21:46.120">...updates I've gone installed the dot net compiler</p>
      <p begin="00:21:46.120" end="00:21:50.880">platform sdk templates I also want install the visual studio sdk</p>
      <p begin="00:21:50.880" end="00:21:56.720">...twenty fifteen rc to go along with this at the moment the visual studio</p>
      <p begin="00:21:56.720" end="00:22:01.560">sdk is being itself broken up into new get packages so this is going to</p>
      <p begin="00:22:01.560" end="00:22:07.050">change this idea that you have to go and find by this emphasize for visual studio sdk install that is going</p>
      <p begin="00:22:07.050" end="00:22:11.950">to change so that you don't have to install that you can just install this package will have dependencies on the</p>
      <p begin="00:22:11.950" end="00:22:18.710">visual studio educate packages so I install this and that gives me because</p>
      <p begin="00:22:18.710" end="00:22:20.850">...now before we begin to</p>
      <p begin="00:22:20.850" end="00:22:25.210">...building it so let's take a look at these lines of code</p>
      <p begin="00:22:25.210" end="00:22:29.050">and what they actually look like there's another tool there that was right under</p>
      <p begin="00:22:30.480" end="00:22:34.970">...another tool that is essential for this</p>
      <p begin="00:22:34.970" end="00:22:39.320">message dot net compiler platforms syntax visualize are which is a tool window to install</p>
      <p begin="00:22:39.320" end="00:22:43.560">...studio that lets you actually see the syntax trees underneath and all of the guts of what</p>
      <p begin="00:22:43.560" end="00:22:47.360">the roslyn object models underneath and that shows up under view?</p>
      <p begin="00:22:48.410" end="00:22:53.950">Other windows...syntax...right here I've already got it up so</p>
      <p begin="00:22:53.950" end="00:22:56.910">I'm over here and click.</p>
      <p begin="00:22:56.910" end="00:23:00.680">This gives me a view of exactly what I'm saying so here's</p>
      <p begin="00:23:00.680" end="00:23:06.650">the local declaration...dig into the nodes of this the one looking for</p>
      <p begin="00:23:06.650" end="00:23:11.990">...variable...into the equals value clogs and that's what I'm looking for</p>
      <p begin="00:23:11.990" end="00:23:15.760">the object creation expression these names of these types these are nodes</p>
      <p begin="00:23:15.760" end="00:23:23.130">...in...abstract syntax tree and, that these are nodes that.</p>
      <p begin="00:23:23.130" end="00:23:28.050">Are have names that match the names in the seizure grammar we designed it that way so if you have a grammer up if you</p>
      <p begin="00:23:28.050" end="00:23:32.710">have the csharp language...look...go up yes I...object creation expression...go over here</p>
      <p begin="00:23:32.710" end="00:23:37.620">...node object creation expression so they...that's exactly what you have to know that you just</p>
      <p begin="00:23:37.620" end="00:23:41.750">need to look right in here in fact this...got some real goodies if you</p>
      <p begin="00:23:41.750" end="00:23:48.280">write click approachable and stuff so I can say view directed syntax...</p>
      <p begin="00:23:48.280" end="00:23:50.280">And, then...of bringing up a graph</p>
      <p begin="00:23:50.280" end="00:23:55.010">digital showing me the subtree of this whole thing.</p>
      <p begin="00:23:55.010" end="00:23:57.300">Right which is super cool.</p>
      <p begin="00:23:57.300" end="00:24:01.860">I can also come down here to the other local declaration...side.</p>
      <p begin="00:24:01.860" end="00:24:06.830">And, see the invocation expression let's see simple member</p>
      <p begin="00:24:06.830" end="00:24:11.640">access down into the argument list known over here.</p>
      <p begin="00:24:11.640" end="00:24:13.960">Where we right here?</p>
      <p begin="00:24:13.960" end="00:24:15.450">That the collection</p>
      <p begin="00:24:15.450" end="00:24:19.840">...right this is the other thing that we need to look for so what I'm what I'm doing</p>
      <p begin="00:24:19.840" end="00:24:23.960">...I'm kind of getting a sense of what the syntax tree is underneath the code that I need to go</p>
      <p begin="00:24:23.960" end="00:24:28.330">and start matching and looking for an analyzer to kind of reduce second so</p>
      <p begin="00:24:28.330" end="00:24:34.250">...can find the pieces...define and analyze them second-order shorts</p>
      <p begin="00:24:34.250" end="00:24:36.580">...index diagram for this and</p>
      <p begin="00:24:36.580" end="00:24:41.480">...very complicated so this...but this is a super useful tool</p>
      <p begin="00:24:41.480" end="00:24:46.080">...I can also go ahead and I could change the code back to the</p>
      <p begin="00:24:46.080" end="00:24:49.720">whether fixed and look at that and see okay here's what I need to do to where you</p>
      <p begin="00:24:49.720" end="00:24:53.980">transform it into ok so there's a couple tools...really helpful here.</p>
      <p begin="00:24:53.980" end="00:25:00.950">Now let's ...that code right there let's go ahead and create analyzer.</p>
      <p begin="00:25:00.950" end="00:25:06.780">Some...analyzer with the code fix this comes from again from the extension that I install.</p>
      <p begin="00:25:06.780" end="00:25:16.650">We'll call this.</p>
      <p begin="00:25:16.650" end="00:25:19.910">As grabbing new get projects...packages right now and coming</p>
      <p begin="00:25:19.910" end="00:25:25.010">in it also creates a test project to go along with it.</p>
      <p begin="00:25:25.010" end="00:25:29.810">Candidly this is recorded...not can at all.</p>
      <p begin="00:25:29.810" end="00:25:32.490">I don't really like artist...so,</p>
      <p begin="00:25:32.490" end="00:25:36.870">I threw up a roslyn and unit like package that I can that you can use for doing if you want to</p>
      <p begin="00:25:36.870" end="00:25:42.320">any testing arduous...x unit one as well just.</p>
      <p begin="00:25:42.320" end="00:25:46.250">This creates for us though rather boxy creates for us ...</p>
      <p begin="00:25:46.250" end="00:25:48.740">analyzer diagnostic analyzer</p>
      <p begin="00:25:48.740" end="00:25:52.590">...a...dissension diagnostic analyzer coming from the roslyn api.</p>
      <p begin="00:25:53.800" end="00:26:01.880">also exposes with...attribute so it identifies itself that will get load by the compiler.</p>
      <p begin="00:26:01.880" end="00:26:06.090">And, also creates a code fix now.</p>
      <p begin="00:26:06.090" end="00:26:11.050">When you create an analyzer there are some decisions to be made</p>
      <p begin="00:26:11.050" end="00:26:16.990">first of all it doesn't matter what language you want to build and if you're vb person and you want to</p>
      <p begin="00:26:16.990" end="00:26:19.570">Code fixes and analyzers that work for csharp</p>
      <p begin="00:26:19.570" end="00:26:24.220">and vb that's fine if you're csharp person that wants to do it for csharp maybe that's fine.</p>
      <p begin="00:26:24.220" end="00:26:27.540">I haven't tried...you could project with escher that's probably fine it's all dot net</p>
      <p begin="00:26:27.540" end="00:26:31.210">code right at the end so it doesn't matter what language</p>
      <p begin="00:26:31.210" end="00:26:36.720">you use but determining your target language may have some</p>
      <p begin="00:26:36.720" end="00:26:40.690">you some decisions you want to make and what you have to kind of think about your analyzer and what</p>
      <p begin="00:26:40.690" end="00:26:46.420">it does to determine half how language neutral or language agnostic can</p>
      <p begin="00:26:46.420" end="00:26:52.600">be there are facilities for looking at for analyzing things in a</p>
      <p begin="00:26:52.600" end="00:26:56.510">way that you could be make it work on csharp and visual basic,</p>
      <p begin="00:26:56.510" end="00:27:03.850">for example, but, it's if you're...very sophisticated instruction...look very at</p>
      <p begin="00:27:03.850" end="00:27:08.420">a very high-fidelity representation of the csharp code with the visual basic code the</p>
      <p begin="00:27:08.420" end="00:27:10.420">...api is that case you might have</p>
      <p begin="00:27:10.420" end="00:27:15.300">...split apart share some code that sort of thing if you want if you want to do that</p>
      <p begin="00:27:15.300" end="00:27:19.160">whether various options you have available to this one in particular kind of looking at</p>
      <p begin="00:27:19.160" end="00:27:24.860">the anatomy of a diagnostic analyzer the most important method here is the</p>
      <p begin="00:27:24.860" end="00:27:27.240">initialize method and that gets called with this</p>
      <p begin="00:27:27.240" end="00:27:31.620">thing called we call context and basically what this is a way that you can</p>
      <p begin="00:27:31.620" end="00:27:36.520">get at interesting information at this phase and the way that oral and the way</p>
      <p begin="00:27:36.520" end="00:27:41.160">you can hook up other events to perform analysis so that you want to be called on so,</p>
      <p begin="00:27:41.160" end="00:27:41.980">for example,</p>
      <p begin="00:27:41.980" end="00:27:47.790">I can dot into this and I'll see a number of registration methods and these are...I can</p>
      <p begin="00:27:47.790" end="00:27:50.270">...up and event or call back to be</p>
      <p begin="00:27:50.270" end="00:27:53.870">call by the compiler when it's time to do one of these things so</p>
      <p begin="00:27:53.870" end="00:27:58.240">there's various there's various concepts you this code block which is when the compilers going</p>
      <p begin="00:27:58.240" end="00:28:02.880">to actually do something that we contain a piece of code so you think</p>
      <p begin="00:28:02.880" end="00:28:07.360">...body curly braces right that sort of thing was actually block of code but also other things like</p>
      <p begin="00:28:07.360" end="00:28:10.510">...of a field or the value given to</p>
      <p begin="00:28:10.510" end="00:28:15.240">of to attributes for the value given to a name parameter, for example,...</p>
      <p begin="00:28:15.240" end="00:28:18.200">optional parameter those sorts of things are where code</p>
      <p begin="00:28:18.200" end="00:28:23.270">...happens there's also compilation and, that's where it's going to the entire</p>
      <p begin="00:28:23.270" end="00:28:28.990">processes starting the entire compilation process and, what these are useful for sometimes you if you want it really</p>
      <p begin="00:28:28.990" end="00:28:33.480">...the syntax but also it compilation you can write things if you want to collect some state</p>
      <p begin="00:28:33.480" end="00:28:36.750">right say I want to go and find all of the unused fields?</p>
      <p begin="00:28:36.750" end="00:28:41.100">Right...do that you want to do a fair amount of analysis right so you have to</p>
      <p begin="00:28:41.100" end="00:28:45.550">at the start of compilation you...some sort of data structure to go in-store all the fields</p>
      <p begin="00:28:45.550" end="00:28:49.700">and collectible at the start and then I was...to create the data structure the</p>
      <p begin="00:28:49.700" end="00:28:54.680">start then you would register actions to go through...look for all the field usage is when you found them you put</p>
      <p begin="00:28:54.680" end="00:28:59.680">...in that data structure and then you would register compilation and action and when that happens</p>
      <p begin="00:28:59.680" end="00:29:04.030">would go and do the analysis compare the data structure and say okay here's,</p>
      <p begin="00:29:04.030" end="00:29:09.520">here's all the report diagnostics for all these unused fields ok so depending on the scope in the breadth of what you're trying</p>
      <p begin="00:29:09.520" end="00:29:12.890">to depends on what you want to do here?</p>
      <p begin="00:29:12.890" end="00:29:15.660">You can get pretty far we found.</p>
      <p begin="00:29:15.660" end="00:29:19.850">With symbol actions symbols their to representations in roslyn</p>
      <p begin="00:29:19.850" end="00:29:23.670">kind of universe there's a syntax representation</p>
      <p begin="00:29:23.670" end="00:29:28.310">which is really like the nodes in the tree really relates to a source file</p>
      <p begin="00:29:28.310" end="00:29:33.510">right it's got all the whitespace it's got everything in it all the comments all the nodes all the code but,</p>
      <p begin="00:29:33.510" end="00:29:38.010">there's also a symbol version of it like a simple table work the</p>
      <p begin="00:29:38.010" end="00:29:42.540">declarations go the types their members that everything can always think of as a review that looks like if</p>
      <p begin="00:29:42.540" end="00:29:46.760">you're looking at reflection you're looking at method foes and types that</p>
      <p begin="00:29:46.760" end="00:29:51.760">sort of thing that's what symbols look like cymbals tend to be very language agnostic and you can do a</p>
      <p begin="00:29:51.760" end="00:29:56.170">lot you can get all you can get pretty far with symbols on fact a lot of the fx</p>
      <p begin="00:29:56.170" end="00:29:59.810">...analyzers which do things like verify that if I've got</p>
      <p begin="00:29:59.810" end="00:30:02.810">...reliable and interface and implementing and I</p>
      <p begin="00:30:02.810" end="00:30:06.590">...added the serialized able attribute...a warning...code fixed</p>
      <p begin="00:30:06.590" end="00:30:11.940">...your legible attribute that's something that and that analysis bring that squiggles something</p>
      <p begin="00:30:11.940" end="00:30:16.690">you'd be done in a language agnostic way on symbols and work for both...visual basic the</p>
      <p begin="00:30:16.690" end="00:30:21.450">code fix itself however because now you're getting into source code and the shape of how people actually</p>
      <p begin="00:30:21.450" end="00:30:26.860">...code actually looks and it's very different that might have to be written separately.</p>
      <p begin="00:30:26.860" end="00:30:31.620">So, what we're going to do this is a this is kind of a silly example I'm going to lead a bunch of bull</p>
      <p begin="00:30:31.620" end="00:30:34.260">replete I don't want to any of this?</p>
      <p begin="00:30:34.260" end="00:30:39.780">What this where does it gives you some...plate right up-front so that?</p>
      <p begin="00:30:39.780" end="00:30:41.810">When you?</p>
      <p begin="00:30:41.810" end="00:30:45.470">Basically what does it says you have types that don't have upper case</p>
      <p begin="00:30:45.470" end="00:30:50.850">names or upper case letters or have lower-case letters in them and flags them with warnings that's the board-like code and</p>
      <p begin="00:30:50.850" end="00:30:57.960">...to rename we don't need to run that we want to something more interesting so we're going</p>
      <p begin="00:30:57.960" end="00:31:02.930">to do is we're going to register a syntax node action now the syntax</p>
      <p begin="00:31:02.930" end="00:31:07.890">node action we're going to register because I want to do this analyzer to say if I'm</p>
      <p begin="00:31:07.890" end="00:31:11.250">doing up and immutable array of t?</p>
      <p begin="00:31:11.250" end="00:31:17.850">...using to them using the default constructor give-me as...that's what I want to.</p>
      <p begin="00:31:17.850" end="00:31:23.090">I'm going to look for the arbitrary expression so all we're going to is coming here and say I use the syntax visual</p>
      <p begin="00:31:23.090" end="00:31:28.220">either I saw what looked like outputs.</p>
      <p begin="00:31:28.220" end="00:31:29.150">So, I'm going to register.</p>
      <p begin="00:31:30.310" end="00:31:32.840">Syntax...action and,</p>
      <p begin="00:31:32.840" end="00:31:36.930">that gives me an opportunity to add a delegating here or a lambda expression to say here's what I want</p>
      <p begin="00:31:36.930" end="00:31:41.010">to do with this here's what I want to be called and usually what I</p>
      <p begin="00:31:41.010" end="00:31:45.790">do here is I will actually often add a lambda and then.</p>
      <p begin="00:31:45.790" end="00:31:49.970">I'll have I'll put some method name and here to be called afterwardsso,</p>
      <p begin="00:31:49.970" end="00:31:57.240">analyze sorry object creation.</p>
      <p begin="00:31:57.240" end="00:31:59.970">Actually this is not gobi called like...these get these are</p>
      <p begin="00:31:59.970" end="00:32:05.290">...called with another context so I'll pass that in</p>
      <p begin="00:32:05.290" end="00:32:07.680">And, then...very last argument</p>
      <p begin="00:32:08.710" end="00:32:13.850">we create a list of the syntax...that we...look for so there's a new genome</p>
      <p begin="00:32:13.850" end="00:32:17.100">in roslyn on both csharp in visual basic called syntax kind</p>
      <p begin="00:32:17.100" end="00:32:23.190">it's very important one because it's crazy huge it has everything.</p>
      <p begin="00:32:23.190" end="00:32:26.000">Ok, so, this is where I'd say yeah,</p>
      <p begin="00:32:26.000" end="00:32:30.350">if you run into...object creation expression call my guy here</p>
      <p begin="00:32:30.350" end="00:32:34.530">ok so I'll use a...from usage is...that for me</p>
      <p begin="00:32:34.530" end="00:32:38.510">call this context over here and this one gets a different type of context.</p>
      <p begin="00:32:38.510" end="00:32:42.540">The one above got this analysis context is kind of the place where everything starts</p>
      <p begin="00:32:42.540" end="00:32:48.000">were initialize ing here's where you can register all the actions to kinda get started.</p>
      <p begin="00:32:48.000" end="00:32:51.550">Now that I'm in here and I'm doing some actual work the context is a syntax</p>
      <p begin="00:32:51.550" end="00:32:56.540">node analysis context and it's got different things on it has a cancellation token because my</p>
      <p begin="00:32:56.540" end="00:33:01.460">...analyzer may or may not be run single threaded it may or may not it</p>
      <p begin="00:33:01.460" end="00:33:04.680">may be running parallel somewhere else these are things you need to be considering,</p>
      <p begin="00:33:04.680" end="00:33:10.670">you know, ...you know, careful track of state one of the reasons we do this action based approach was so that</p>
      <p begin="00:33:10.670" end="00:33:15.420">you can nest actions and you can maintain state within those actions and keep it</p>
      <p begin="00:33:15.420" end="00:33:18.130">safe right if we so that you don't have</p>
      <p begin="00:33:18.130" end="00:33:22.940">to continually take locks but it's something to be considered because if you're in the id...chances are we're running</p>
      <p begin="00:33:22.940" end="00:33:28.460">it asynchronous...so we're not blocking typing right so it's something to be careful so</p>
      <p begin="00:33:28.460" end="00:33:33.290">passing cancellation tokens around is a good idea because somebody might type another character and your analysis</p>
      <p begin="00:33:33.290" end="00:33:38.150">might now not be interesting anymore but.</p>
      <p begin="00:33:38.150" end="00:33:41.670">The notice here the actual node the get return because we said we</p>
      <p begin="00:33:41.670" end="00:33:46.240">wanted syntax kind dot object creation expression we know that's what it's going to be so we're</p>
      <p begin="00:33:46.240" end="00:33:51.600">...we're going to assume that we get a set of options which are some sometimes can be passed</p>
      <p begin="00:33:51.600" end="00:33:57.200">...now for analysis they're used for different differentsorts of.</p>
      <p begin="00:33:57.200" end="00:34:00.050">Of scenarios...semantic model which allows us to</p>
      <p begin="00:34:00.050" end="00:34:06.180">ask semantic questions at this point about nodes in the node or in the surrounding</p>
      <p begin="00:34:06.180" end="00:34:11.150">...around so...when I systematic questions main like okay...take...object creation</p>
      <p begin="00:34:11.150" end="00:34:16.060">expression that new of immutable array the first thing I need to do is look at the type of</p>
      <p begin="00:34:16.060" end="00:34:21.280">it and verify that it's actually immutable array that would be the sort of question semantic question algorithmic</p>
      <p begin="00:34:21.280" end="00:34:25.560">...is this actually will...seems pretty simple, you know,</p>
      <p begin="00:34:25.560" end="00:34:30.649">about so I'm going to assume this</p>
      <p begin="00:34:30.649" end="00:34:37.230">...object creation expressions syntax.</p>
      <p begin="00:34:37.230" end="00:34:40.550">All right now what I'm going to do is I'm going to.</p>
      <p begin="00:34:40.550" end="00:34:47.250">I'm going-to try and this is starting to get a little bit well, first we're going to organize the...</p>
      <p begin="00:34:47.250" end="00:34:51.890">a little less productive and I'd like to because we're being able speculative about it I'm going to try and</p>
      <p begin="00:34:51.890" end="00:34:56.420">write this analyzer at debug time with...continue because I find that is</p>
      <p begin="00:34:56.420" end="00:34:59.960">...more efficient but first...plus...some better names up here before</p>
      <p begin="00:34:59.960" end="00:35:03.970">you before dive into that let's give it a better category it's not naming</p>
      <p begin="00:35:03.970" end="00:35:08.940">we're calling this like api guidance and then let's make sure that are resources makes sense I don't want to</p>
      <p begin="00:35:08.940" end="00:35:13.300">be type names should be all upper case...to be use</p>
      <p begin="00:35:14.450" end="00:35:23.220">...or don't use amenable rarity right ...</p>
      <p begin="00:35:23.220" end="00:35:27.460">Instructor and will?</p>
      <p begin="00:35:27.460" end="00:35:32.040">We'll just make sure that everybody realizes real saying I'm not just running the one that I had a new get</p>
      <p begin="00:35:32.040" end="00:35:36.050">...slight-of-hand who write the real thing.</p>
      <p begin="00:35:36.050" end="00:35:48.150">Now copy all...down here oops.</p>
      <p begin="00:35:48.150" end="00:35:52.160">I see what did I was in here okay sorry about that.</p>
      <p begin="00:35:52.160" end="00:35:56.640">All right there we go so now I'm just going-to go ahead and run</p>
      <p begin="00:35:56.640" end="00:36:00.490">now if you notice down there the startup project is a vsix.</p>
      <p begin="00:36:00.490" end="00:36:04.400">This is really great for debugging because I'm going to debug this against another instance of visual studio</p>
      <p begin="00:36:04.400" end="00:36:07.210">just going to have it running so that I can go and loads</p>
      <p begin="00:36:07.210" end="00:36:13.640">...replying around and hit my break point...so five.</p>
      <p begin="00:36:13.640" end="00:36:19.320">Hopefully everything builds.</p>
      <p begin="00:36:19.320" end="00:36:26.750">We...visual studio mind-blowing visual...debugging visual studio.</p>
      <p begin="00:36:26.750" end="00:36:31.390">And, this actually runs visual studio in another we call experimental</p>
      <p begin="00:36:31.390" end="00:36:36.130">high ifvisual studio has a way of kind of loading itself another</p>
      <p begin="00:36:36.130" end="00:36:40.950">...has a different set of extensions so this doesn't installed my primary visual studio gets install</p>
      <p begin="00:36:40.950" end="00:36:46.690">...studio with...other...of extensions that includes the one I'm working on.</p>
      <p begin="00:36:46.690" end="00:36:51.400">If you're interested in error things ever get one key the best thing to do...air brake</p>
      <p begin="00:36:51.400" end="00:36:55.110">...on the best thing you...everything's ever get walking with your highs.</p>
      <p begin="00:36:56.160" end="00:36:59.080">Local app data prototype local...data.</p>
      <p begin="00:37:00.090" end="00:37:03.000">Microsoft visual studio.</p>
      <p begin="00:37:03.000" end="00:37:06.850">And, in here there's fourteen data that is twenty fifteen that's the version number visual</p>
      <p begin="00:37:06.850" end="00:37:10.850">...doesn't fifteen that's my main...that's the one that runs when I click on the icon</p>
      <p begin="00:37:10.850" end="00:37:17.220">in the start menu these are experimental once this is the one we're actually working in you can actually you can see the date</p>
      <p begin="00:37:17.220" end="00:37:24.050">modified is today eleven six am it was one-minute ago when we compiler extension and, deployed</p>
      <p begin="00:37:24.050" end="00:37:28.760">...so it's things ever get...you can come in here and do things like?</p>
      <p begin="00:37:28.760" end="00:37:33.550">Delete extension delete the component model cash which does the math cash visual studio things aren't loading</p>
      <p begin="00:37:33.550" end="00:37:37.730">right so there's there are things you can do here to kind of fix-up your world of things get out of...</p>
      <p begin="00:37:37.730" end="00:37:43.600">whacked so prototype local at data microsoft visual studio so if...break point and,</p>
      <p begin="00:37:43.600" end="00:37:47.420">the reason...break point was because...creation expression was found.</p>
      <p begin="00:37:47.420" end="00:37:51.070">Right here's our demo fodder it looks like.</p>
      <p begin="00:37:51.070" end="00:37:52.690">Looks like this.</p>
      <p begin="00:37:52.690" end="00:37:55.260">It's not really much to it.</p>
      <p begin="00:37:55.260" end="00:37:59.770">It was actually found if you notice this analyzer is running before</p>
      <p begin="00:37:59.770" end="00:38:04.750">really even before the semantic polarization in the ide...</p>
      <p begin="00:38:04.750" end="00:38:13.540">trying to find out is this is a scott is this thing bad so if I go ahead and step through.</p>
      <p begin="00:38:13.540" end="00:38:18.880">Yeah, I see that in fact this is the object creation syntax.</p>
      <p begin="00:38:18.880" end="00:38:21.410">I can look at it.</p>
      <p begin="00:38:21.410" end="00:38:26.450">Here we can see what it is...strengthen see that yeah, that's exactly</p>
      <p begin="00:38:26.450" end="00:38:31.900">...I'm looking for that's the node reagan always to string on a node and...give you exactly the source</p>
      <p begin="00:38:31.900" end="00:38:38.310">code that was part from...even if it had errors will always go back and show you the same source code.</p>
      <p begin="00:38:38.310" end="00:38:42.020">All right so next up we need to verify that is in fact</p>
      <p begin="00:38:42.020" end="00:38:46.820">immutable array of t so I need to somehow figure out what type how to use</p>
      <p begin="00:38:46.820" end="00:38:51.730">the semantic model to ask the question what type is this and I have to go out and find the</p>
      <p begin="00:38:51.730" end="00:38:55.080">actual mutable retyping compare them are the same so let's get the</p>
      <p begin="00:38:55.080" end="00:38:58.260">...retype first.</p>
      <p begin="00:38:58.260" end="00:39:03.320">...mule retype because I'm not creative today and,</p>
      <p begin="00:39:03.320" end="00:39:05.370">we're going to get to this by going back to</p>
      <p begin="00:39:05.370" end="00:39:08.920">an api this is a very useful api for just trying to find.</p>
      <p begin="00:39:08.920" end="00:39:13.780">Types in the universe...loaded go-to semantic model.</p>
      <p begin="00:39:13.780" end="00:39:18.280">...compilation and...the type.</p>
      <p begin="00:39:18.280" end="00:39:21.590">By its metadata name all right and the metadata name</p>
      <p begin="00:39:21.590" end="00:39:24.370">of this type is system.</p>
      <p begin="00:39:24.370" end="00:39:26.280">Collections...mutable.</p>
      <p begin="00:39:27.410" end="00:39:30.120">Dot immutable array.</p>
      <p begin="00:39:30.120" end="00:39:32.960">Who and what do I put here?</p>
      <p begin="00:39:32.960" end="00:39:36.620">...it's not this...</p>
      <p begin="00:39:36.620" end="00:39:41.700">it's not as meta name so in metadata if you don't know the way to generics are</p>
      <p begin="00:39:41.700" end="00:39:45.500">encoded their names are...metadata was a backtrack and then with the array</p>
      <p begin="00:39:45.500" end="00:39:48.630">...right so the number of type...will be back</p>
      <p begin="00:39:48.630" end="00:39:53.100">...one and that should be the immutable array now because I'm doing this</p>
      <p begin="00:39:53.100" end="00:39:56.330">...continue time just go back.</p>
      <p begin="00:39:56.330" end="00:40:00.690">And, step over...make sure that worked hey look it came back with a symbol and name</p>
      <p begin="00:40:00.690" end="00:40:03.520">types symbol system collections immutable...you</p>
      <p begin="00:40:03.520" end="00:40:08.210">can start drilling into that and looking at the object model inside of it all right cool</p>
      <p begin="00:40:08.210" end="00:40:13.610">that's cool so let's go to the arbitration expression all the bedtime all in continue</p>
      <p begin="00:40:13.610" end="00:40:18.910">...so, let's ask that semantic model</p>
      <p begin="00:40:18.910" end="00:40:23.000">hey the type of this object creation expression what is that.</p>
      <p begin="00:40:23.000" end="00:40:28.880">So, I'm going to put that in a variable called symbol info and, I'm going to go to the context</p>
      <p begin="00:40:28.880" end="00:40:30.830">...semantic model.</p>
      <p begin="00:40:30.830" end="00:40:35.490">And, say all right and this semantic model has all sorts of interesting things on it</p>
      <p begin="00:40:35.490" end="00:40:40.600">things that we will not drill into hear things like analyze data flow and all sorts of nifty things on</p>
      <p begin="00:40:40.600" end="00:40:45.500">your forgetting asking semantic questions of syntax nodes that's kinda how we built</p>
      <p begin="00:40:45.500" end="00:40:49.820">roslyn instead of giving you what we would call abound tree where or...antidotes</p>
      <p begin="00:40:49.820" end="00:40:54.550">...everything all the symbols and everything was already resolved in the tree instead we give you an</p>
      <p begin="00:40:54.550" end="00:40:58.890">api that you can ask questions what does this node actually buying to</p>
      <p begin="00:40:58.890" end="00:41:06.450">what's the csharp language rules of resolved over it so I'm going to them holtz get symbol info.</p>
      <p begin="00:41:06.450" end="00:41:11.870">And, that is going to be past object creation...creation expression of</p>
      <p begin="00:41:11.870" end="00:41:15.060">...are actually because that's going back not the type of</p>
      <p begin="00:41:15.060" end="00:41:18.870">...back to constructor so I'm going to drill into the object creation number grab</p>
      <p begin="00:41:18.870" end="00:41:26.670">it's actually actual type part of the node the thing that's the actual...immutable rate of t.</p>
      <p begin="00:41:26.670" end="00:41:34.320">And, we'll step over this.</p>
      <p begin="00:41:34.320" end="00:41:35.600">Hey, look.</p>
      <p begin="00:41:35.600" end="00:41:39.430">It's enemy...of system dot in thirty-two we're getting we're actually looking at</p>
      <p begin="00:41:39.430" end="00:41:44.130">the source code introspective analyzing using this the...our of a compiler</p>
      <p begin="00:41:44.130" end="00:41:50.030">done a compiler to...has done it compiler platform so now I know</p>
      <p begin="00:41:50.030" end="00:41:53.320">it's a name type what I'm going to do here is I know I wanted to be</p>
      <p begin="00:41:53.320" end="00:41:58.580">...types so instead of putting this in a symbol info I'm going to say.</p>
      <p begin="00:41:58.580" end="00:42:02.810">We're...call this...rate type.</p>
      <p begin="00:42:02.810" end="00:42:07.490">I'm going to get the symbol...it's a name type symbol okay that's what I</p>
      <p begin="00:42:07.490" end="00:42:11.080">want to be will protect against it...a second so there</p>
      <p begin="00:42:11.080" end="00:42:21.690">is my system dot and thirty-two so just plotted out that symbol info.</p>
      <p begin="00:42:21.690" end="00:42:25.270">Now remember this is a construct a generic it hasn't internet already but the type</p>
      <p begin="00:42:25.270" end="00:42:29.460">is actually in the assembly is the one that's of t sony to compare I wanted-to get back</p>
      <p begin="00:42:29.460" end="00:42:34.060">from the one that's constructed to the open generic type to the one...of...so I'll do that</p>
      <p begin="00:42:34.060" end="00:42:38.830">by using a property off of the symbol here called constructed from.</p>
      <p begin="00:42:38.830" end="00:42:41.810">...gives you the returns types...this was constructed from without,</p>
      <p begin="00:42:41.810" end="00:42:48.050">without type arguments if that equals the immutable</p>
      <p begin="00:42:48.050" end="00:42:51.390">...type then.</p>
      <p begin="00:42:51.390" end="00:42:56.140">We're going to reporter diagnostic one thing here is that if this happens to not</p>
      <p begin="00:42:56.140" end="00:43:00.420">be the...type symbol for some reason and that is...conceivable could be</p>
      <p begin="00:43:01.430" end="00:43:06.650">it could be other types of things it doesn't have to be immutable array could be anything if it happens to</p>
      <p begin="00:43:06.650" end="00:43:11.450">be will throw here so I'm going-to go ahead you csharp six the noble condition</p>
      <p begin="00:43:11.450" end="00:43:15.640">no conditional operator to make sure that I can it's just a scape that null so if it</p>
      <p begin="00:43:15.640" end="00:43:19.800">has to be null will move forward now that is interesting because that changes</p>
      <p begin="00:43:19.800" end="00:43:22.880">...this expression return boolean that changes this now to</p>
      <p begin="00:43:22.880" end="00:43:29.820">null mobile have to change expression slightly say if that equals true.</p>
      <p begin="00:43:29.820" end="00:43:33.340">Then we're going to go ahead and reporter diagnostic.</p>
      <p begin="00:43:33.340" end="00:43:35.670">So, I go...the context I call report diagnostic.</p>
      <p begin="00:43:36.960" end="00:43:42.030">And, I create diagnostic.</p>
      <p begin="00:43:42.030" end="00:43:46.980">...actually we're going to...rule that's the diagnostic descriptor is define</p>
      <p begin="00:43:46.980" end="00:43:52.140">force already it's right here is defined as part of the actual the template is</p>
      <p begin="00:43:52.140" end="00:43:58.470">...with those resources that we that we renamed a little bit ago so remember that here.</p>
      <p begin="00:43:58.470" end="00:44:05.380">And, the location is the span I want to be squiggles and the span I want to be scribbled</p>
      <p begin="00:44:05.380" end="00:44:09.610">is actually the type so we'll give it a object creation again getting back to</p>
      <p begin="00:44:09.610" end="00:44:17.120">...expression the type of it and we'll call get location?</p>
      <p begin="00:44:17.120" end="00:44:22.110">one more thing I need to pass and...I don't need to do anymore things.</p>
      <p begin="00:44:22.110" end="00:44:24.390">That's it.</p>
      <p begin="00:44:24.390" end="00:44:27.970">Okay, we have literally this much code if</p>
      <p begin="00:44:27.970" end="00:44:31.930">it's on-screen fifteen-point with a bunch of other tool windows up.</p>
      <p begin="00:44:31.930" end="00:44:35.390">All right so just...to you let's go back here</p>
      <p begin="00:44:35.390" end="00:44:37.190">...step over.</p>
      <p begin="00:44:37.190" end="00:44:41.590">Here we reporter diagnostic I'm going to rubric point</p>
      <p begin="00:44:41.590" end="00:44:45.920">...get to come back here and I should.</p>
      <p begin="00:44:45.920" end="00:44:55.500">...google.</p>
      <p begin="00:44:55.500" end="00:45:00.590">As a bonus we did all...continue now this...squiggles warning because</p>
      <p begin="00:45:00.590" end="00:45:04.410">...default right that's the default from the...I could say it says, you know,</p>
      <p begin="00:45:04.410" end="00:45:06.490">create these...warnings by default this is</p>
      <p begin="00:45:06.490" end="00:45:12.050">a particularly heinous one I'm going to stop this and go back ...heinous,</p>
      <p begin="00:45:12.050" end="00:45:17.050">...transgressions of using the immutable api so we're going to say</p>
      <p begin="00:45:17.050" end="00:45:21.880">here it's over in the rule itself the default the diagnostics...should be</p>
      <p begin="00:45:21.880" end="00:45:27.530">an error right so the squiggles read...your build so if you put this in a new get package</p>
      <p begin="00:45:27.530" end="00:45:31.330">reprint of...sick or you put this new package...your project</p>
      <p begin="00:45:31.330" end="00:45:36.320">and gets restored on build...on your build server will break your bill...great.</p>
      <p begin="00:45:36.320" end="00:45:41.040">So, let's write a fix we've got a little bit time.</p>
      <p begin="00:45:41.040" end="00:45:43.230">Yes,...time rather than the speed</p>
      <p begin="00:45:43.230" end="00:45:48.570">though all right so I'm going to create a new code fix provider.</p>
      <p begin="00:45:48.570" end="00:45:55.490">And, the way you do it's very similar to writing analyzer analyzers you're given kind of this</p>
      <p begin="00:45:55.490" end="00:45:56.910">...the differences that analyzers</p>
      <p begin="00:45:56.910" end="00:46:01.660">you're given api as the compiler has bakes them for you it's already</p>
      <p begin="00:46:01.660" end="00:46:07.030">cooked them up so it hands over ok of semantic model now it's all cooked up I've done all the although I need to do</p>
      <p begin="00:46:07.030" end="00:46:12.270">to resolve all csharp language rules here you go here it is in a code fix</p>
      <p begin="00:46:12.270" end="00:46:17.780">...different it happens it's user initiated right so you kinda get a different set</p>
      <p begin="00:46:17.780" end="00:46:22.500">of api is to work with it so.</p>
      <p begin="00:46:22.500" end="00:46:25.350">I'm going to call this actually is a terrible name because</p>
      <p begin="00:46:25.350" end="00:46:28.560">...sent from is that we'll call it build.</p>
      <p begin="00:46:28.560" end="00:46:32.510">Build code fix provider we're going to sent from the type called</p>
      <p begin="00:46:32.510" end="00:46:35.480">code which provider go ahead and control dot</p>
      <p begin="00:46:35.480" end="00:46:41.320">to add that and then I need to always remember to export.</p>
      <p begin="00:46:41.320" end="00:46:44.140">Okay, and, I give it a language</p>
      <p begin="00:46:46.460" end="00:46:51.090">that is targeting so that's going to be off of there's a there's a type...of kind of a bag</p>
      <p begin="00:46:51.090" end="00:46:55.890">of language names and rousing called language names...to be csharp.</p>
      <p begin="00:46:55.890" end="00:47:00.570">So, this should be loaded now or...it doesn't error we get to a certain point will be</p>
      <p begin="00:47:00.570" end="00:47:04.890">loaded in the id and we're going-to go ahead and implement that interface</p>
      <p begin="00:47:04.890" end="00:47:09.750">or abstract class like so go ahead and.</p>
      <p begin="00:47:09.750" end="00:47:13.680">Now the first thing to do is tell it here are the diagnostic aidid's that</p>
      <p begin="00:47:13.680" end="00:47:17.580">it actually fixes a diagnostic ideas that little number that appears in the left...the</p>
      <p begin="00:47:17.580" end="00:47:23.920">airlift actually totally a string you could you could put a lot of things in there but,</p>
      <p begin="00:47:23.920" end="00:47:28.770">in for this one the diagnostic id is whereas</p>
      <p begin="00:47:29.910" end="00:47:31.650">...up here.</p>
      <p begin="00:47:31.650" end="00:47:35.240">So, I'm actually just going to the make it const...public</p>
      <p begin="00:47:35.240" end="00:47:38.260">...so I can actually call it right off of this.</p>
      <p begin="00:47:38.260" end="00:47:42.130">And, we'll just return a new immutable array half.</p>
      <p begin="00:47:42.130" end="00:47:45.670">Careful.</p>
      <p begin="00:47:45.670" end="00:47:50.470">What is create one passing in the diagnostic id from their?</p>
      <p begin="00:47:50.470" end="00:47:53.860">...now this...out because hey csharp and schedules...this can be</p>
      <p begin="00:47:53.860" end="00:47:58.820">turn into an expression by member sony to have all...position separate line</p>
      <p begin="00:47:58.820" end="00:48:03.800">sometimes of the long ok now down at our method this is where we're going to implement</p>
      <p begin="00:48:03.800" end="00:48:07.990">actually register code fix that's going to do the actual transformation</p>
      <p begin="00:48:07.990" end="00:48:11.890">now what we're given in our context here this is a get</p>
      <p begin="00:48:11.890" end="00:48:16.690">...a different context the code fix context is very different we're going to consul</p>
      <p begin="00:48:16.690" end="00:48:21.650">the cancellation token the diagnostics for which this is being triggered because...fix could fix</p>
      <p begin="00:48:21.650" end="00:48:26.850">multiples diagnostic...to be multiple diagnostics on the same line that apply so</p>
      <p begin="00:48:26.850" end="00:48:31.630">...kind of a bag here a document now document is analogous</p>
      <p begin="00:48:31.630" end="00:48:36.300">kind of to visual studio document or it might not be visual studio if</p>
      <p begin="00:48:36.300" end="00:48:38.890">...hosted somewhere else it's and say so,</p>
      <p begin="00:48:38.890" end="00:48:41.960">you're on a sharpe...something like that might not be visual studio but</p>
      <p begin="00:48:41.960" end="00:48:46.420">...the that notion of a file with the tree and semantic model and all of</p>
      <p begin="00:48:46.420" end="00:48:50.590">that you can actually though the document is also part of an immutable model object</p>
      <p begin="00:48:50.590" end="00:48:52.950">model that can go up to you can get to the project into the</p>
      <p begin="00:48:52.950" end="00:48:58.180">solution so you can do a lot with a document the documents triggered in you also get a</p>
      <p begin="00:48:58.180" end="00:49:03.110">...which is literally the tech span of the that is being triggered off of</p>
      <p begin="00:49:03.110" end="00:49:07.770">...so that's that location that we gave in the analyzer where do I want</p>
      <p begin="00:49:07.770" end="00:49:14.700">this google to appear that's going to be right here is a spanned in the editor a start in and.</p>
      <p begin="00:49:14.700" end="00:49:19.950">...we go and do we know we need to get back to that object creation expression so,</p>
      <p begin="00:49:19.950" end="00:49:23.730">the first thing I would do though because implement abstract class does not do this</p>
      <p begin="00:49:23.730" end="00:49:25.470">...I'm sorry?</p>
      <p begin="00:49:25.470" end="00:49:29.100">The...asic...is going to run potentially, you know,</p>
      <p begin="00:49:29.100" end="00:49:31.280">in the background showing up the</p>
      <p begin="00:49:31.280" end="00:49:35.980">light bulb in visual studio it could...could run and all sorts of different ways so we do this</p>
      <p begin="00:49:35.980" end="00:49:40.820">and is asic manner in the document itself is also supports of several asic api</p>
      <p begin="00:49:40.820" end="00:49:46.230">as the first...is I'm going to get the syntax route from the document the syntax</p>
      <p begin="00:49:46.230" end="00:49:51.240">...is what's from context document syntax...is</p>
      <p begin="00:49:51.240" end="00:49:58.780">a little the root node of the entire syntax tree and it's a</p>
      <p begin="00:49:58.780" end="00:50:00.130">Because.</p>
      <p begin="00:50:00.130" end="00:50:04.640">It might hit the disk it might be this document hasn't actually been read yet in my have to go to the</p>
      <p begin="00:50:04.640" end="00:50:08.090">disk do a parsed to all sorts of things so we do this asynchronous...we</p>
      <p begin="00:50:08.090" end="00:50:13.030">await that so that we're not blocking the why thread while things might be happening like that</p>
      <p begin="00:50:13.030" end="00:50:16.950">so we just to be aware ...cancellation</p>
      <p begin="00:50:16.950" end="00:50:21.520">token case while that happens somebody types another character something like that now that we've got the</p>
      <p begin="00:50:21.520" end="00:50:23.970">root of the tree we can take the span were given</p>
      <p begin="00:50:23.970" end="00:50:29.440">and find the node that we're interested in so I'm going to do that by stream together a couple api</p>
      <p begin="00:50:29.440" end="00:50:35.920">is object creation...what I'm going to get going...roots I'm going to find a node.</p>
      <p begin="00:50:35.920" end="00:50:41.590">I think of...tree not...didn't do root ago</p>
      <p begin="00:50:41.590" end="00:50:47.880">...a...find node pass in my span here.</p>
      <p begin="00:50:47.880" end="00:50:52.510">And, that span is going to find me a node it might not be the node I'm looking for might because remember...actually</p>
      <p begin="00:50:52.510" end="00:50:56.640">...of the type not the whole object creation expression the arbitration expressions</p>
      <p begin="00:50:56.640" end="00:51:01.500">...replace and replace the new keyword in the parens of the end so we're going to go</p>
      <p begin="00:51:01.500" end="00:51:04.380">and...tuff to can navigate through a find</p>
      <p begin="00:51:04.380" end="00:51:09.580">the first ancestor of this in the tree or itself of type</p>
      <p begin="00:51:09.580" end="00:51:20.980">object creation expression syntax...find for me.</p>
      <p begin="00:51:20.980" end="00:51:27.150">that should be there now if we found that we know that this is were being called here because the analysis</p>
      <p begin="00:51:27.150" end="00:51:31.830">happen we know that it's correct right we know that we are in...condition whether using</p>
      <p begin="00:51:31.830" end="00:51:36.770">...array of t so we can go ahead and perform the transformation I'm going-to go ahead and</p>
      <p begin="00:51:36.770" end="00:51:40.630">register code fix right here and we do this is you</p>
      <p begin="00:51:40.630" end="00:51:44.250">...code action the code actions kind of representation of</p>
      <p begin="00:51:44.250" end="00:51:48.390">the change itself okay the thing that actually transforms</p>
      <p begin="00:51:48.390" end="00:51:52.260">...thing to another so...create that.</p>
      <p begin="00:51:53.280" end="00:51:59.180">Credit code action.</p>
      <p begin="00:51:59.180" end="00:52:04.980">...we'll give it a title like.</p>
      <p begin="00:52:04.980" end="00:52:08.060">Use immutable array.</p>
      <p begin="00:52:08.060" end="00:52:13.640">Dot-tdot emptied.</p>
      <p begin="00:52:13.640" end="00:52:16.460">I would love...all of my fixes at that.</p>
      <p begin="00:52:16.460" end="00:52:20.920">And, then we have a very complicated looking delegate types...</p>
      <p begin="00:52:20.920" end="00:52:26.040">...lambdas doughy it takes a cancellation...returns a task</p>
      <p begin="00:52:26.040" end="00:52:30.580">of document again because this is going to be a synchronous the transformation from the</p>
      <p begin="00:52:30.580" end="00:52:36.090">old document into the new document needs to also be considered to be asynchronous as well so,</p>
      <p begin="00:52:36.090" end="00:52:41.210">it's...return a task...document so I'm going to pass in here.</p>
      <p begin="00:52:41.210" end="00:52:44.970">Name I cancellation token see and,</p>
      <p begin="00:52:44.970" end="00:52:49.180">do fix we'll call it going to...in?</p>
      <p begin="00:52:49.180" end="00:52:54.380">Let's see my object creation expression marcos over that I'm also going to close</p>
      <p begin="00:52:54.380" end="00:52:59.650">over the document and my cancellation open.</p>
      <p begin="00:53:00.690" end="00:53:04.460">That's all I need to do now I'm going to generate my method.</p>
      <p begin="00:53:04.460" end="00:53:08.900">...have to make it a...</p>
      <p begin="00:53:08.900" end="00:53:10.860">...do...have an extra.</p>
      <p begin="00:53:16.720" end="00:53:20.750">So, yes.</p>
      <p begin="00:53:20.750" end="00:53:23.750">Sorry...actually pass the diagnostic it likes to know which diagnostic</p>
      <p begin="00:53:23.750" end="00:53:29.160">your providing a fix for there's only one and here's what provide that okay so,</p>
      <p begin="00:53:29.160" end="00:53:32.700">now performing the fix I've got the...creation expression I'm going to construct.</p>
      <p begin="00:53:33.740" end="00:53:36.590">The immutable array of t...of</p>
      <p begin="00:53:36.590" end="00:53:42.320">...or whatever it's actually constructed from whatever...generic is I'm...to take that and</p>
      <p begin="00:53:42.320" end="00:53:47.670">put dot empty on the end now I know that in the seizure grammer well,...just try it out I know the</p>
      <p begin="00:53:47.670" end="00:53:54.210">seizure...that's actually a member access expression I can verify that bring up the syntax</p>
      <p begin="00:53:54.210" end="00:53:56.000">visualize again.</p>
      <p begin="00:53:56.000" end="00:54:00.140">And, looking just running some code and looking at it.</p>
      <p begin="00:54:00.140" end="00:54:02.500">Right here...a simple member access expression</p>
      <p begin="00:54:02.500" end="00:54:07.890">is whiny deconstruct and replace the object creation expression with that.</p>
      <p begin="00:54:07.890" end="00:54:08.570">So, we'll go</p>
      <p begin="00:54:08.570" end="00:54:12.330">in here...as you can see our bit more complex or.</p>
      <p begin="00:54:13.550" end="00:54:18.930">Go to create remember access expression I'm going to use.</p>
      <p begin="00:54:18.930" end="00:54:22.650">Actually I'm going to use a new api that we've just added called</p>
      <p begin="00:54:22.650" end="00:54:27.350">the syntax generator which is a great way for generating syntax nodes in a language</p>
      <p begin="00:54:27.350" end="00:54:30.120">kind of agnostic sort of way for various types of</p>
      <p begin="00:54:30.120" end="00:54:35.760">...nodes and one of those that is easy to create from it is in fact the</p>
      <p begin="00:54:36.780" end="00:54:42.740">member access expression so go ahead and add this guy.</p>
      <p begin="00:54:42.740" end="00:54:47.860">Me some there we go to get generator for particular document so this gives me</p>
      <p begin="00:54:47.860" end="00:54:51.660">a way this generator object to add all sorts of</p>
      <p begin="00:54:51.660" end="00:54:56.080">things to make syntax changes to a tree to actually make transformation</p>
      <p begin="00:54:56.080" end="00:55:01.410">super useful for a lot of different tasks the one I want this</p>
      <p begin="00:55:01.410" end="00:55:06.170">one member access expression what does it takes a node.</p>
      <p begin="00:55:06.170" end="00:55:10.890">And, a name the name is going to be the member that's going to be dotted into the node is going to be</p>
      <p begin="00:55:10.890" end="00:55:14.350">the object creations type right so I can actually just passing here</p>
      <p begin="00:55:14.350" end="00:55:18.750">object creation dot type...the name empty.</p>
      <p begin="00:55:18.750" end="00:55:22.140">And, now I have the node I need.</p>
      <p begin="00:55:22.140" end="00:55:25.180">So, this point it's there's a fairly mechanical process</p>
      <p begin="00:55:26.260" end="00:55:29.970">...let's go back going to get the root of the tree again</p>
      <p begin="00:55:29.970" end="00:55:35.630">...just copy and paste because we have...visual studio.</p>
      <p begin="00:55:35.630" end="00:55:39.350">But, I need to changes on that because I</p>
      <p begin="00:55:39.350" end="00:55:44.030">pasadena specifically and I gave it my own cancellation token called see all right so we get the</p>
      <p begin="00:55:44.030" end="00:55:45.180">route.</p>
      <p begin="00:55:45.180" end="00:55:50.720">And,...were going to create a new route from that...half by calling replace</p>
      <p begin="00:55:50.720" end="00:55:53.990">node which can replace in the tree arbitration with</p>
      <p begin="00:55:53.990" end="00:55:59.100">remember access and now we have a brian nutri back roslyn transformations</p>
      <p begin="00:55:59.100" end="00:56:03.650">of syntax trees are done in a in of immutable fashion these are immutable</p>
      <p begin="00:56:03.650" end="00:56:08.730">api so you think of it like string dot replace I make a change I get back in new</p>
      <p begin="00:56:08.730" end="00:56:11.270">...the same thing with the trees.</p>
      <p begin="00:56:11.270" end="00:56:17.300">And, then our last thing is we're going to go document returned from a document.</p>
      <p begin="00:56:17.300" end="00:56:21.950">Document with that new syntax route.</p>
      <p begin="00:56:21.950" end="00:56:25.050">And, now let's fingers cross.</p>
      <p begin="00:56:25.050" end="00:56:28.420">Let's run.</p>
      <p begin="00:56:28.420" end="00:56:37.720">May have done this in time.</p>
      <p begin="00:56:37.720" end="00:56:42.300">Demo father here we are it's an error now like we said.</p>
      <p begin="00:56:43.430" end="00:56:45.960">I'm not seeing the code fix.</p>
      <p begin="00:56:45.960" end="00:56:50.970">And, but, I know why...open that folder earlier and I said sometimes you get a kick</p>
      <p begin="00:56:50.970" end="00:56:52.330">things.</p>
      <p begin="00:56:52.330" end="00:57:00.700">...component model cash.</p>
      <p begin="00:57:00.700" end="00:57:02.480">So, that means now it's going to...to</p>
      <p begin="00:57:02.480" end="00:57:07.370">...of cash I believe what happened was the binary didn't change enough that realized there was something new</p>
      <p begin="00:57:07.370" end="00:57:11.970">...right so, visual studio didn't really refresh it so now there's a</p>
      <p begin="00:57:11.970" end="00:57:15.350">...there and says hey use...immutable the of</p>
      <p begin="00:57:15.350" end="00:57:28.370">...empty fool and sure enough it works you got the preview for free everything for free.</p>
      <p begin="00:57:28.370" end="00:57:30.870">I want to thank you guys were actually at a time</p>
      <p begin="00:57:33.030" end="00:57:36.960">...was a lot of fun rushing through and constructing something off the top</p>
      <p begin="00:57:36.960" end="00:57:41.110">my head almost quite literally built yesterday so there's a few</p>
      <p begin="00:57:41.110" end="00:57:46.860">relates ox obviously these are over but, these will all be online</p>
      <p begin="00:57:46.860" end="00:57:50.690">...out dually even evaluation and...going to be</p>
      <p begin="00:57:50.690" end="00:57:56.840">...to take questions we're kind of time if we want to use the microphones...please do so-if not</p>
      <p begin="00:57:56.840" end="00:58:00.440">you can showed...try and repeat the question but I hope you guys enjoy it.</p>

    </div>
  </body>
</tt>